<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
   <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>

<body>
   <button id="login">login</button>
   <button id="profile">get profile</button>
   <button id="open">open window</button>

   <script>
      let login = document.querySelector('#login');
      let profile = document.querySelector('#profile');
      let open = document.querySelector('#open');

      let loginHandler = function() {
         if (liff.isLoggedIn()) return;
         liff.login({ redirectUri: "https://harvey0623.github.io/side_project/liff.html" });
      }

      let getProfile = async function() {
         let userInfo = await liff.getProfile().then(res => res);
         console.log(userInfo);
      }

      let openHandler = function() {
         liff.openWindow({
            url: 'https://www.youtube.com/watch?v=Bc-MKRsHjTo',
            external: false
         })
      }

      let init = async function() {
         login.addEventListener('click', loginHandler);
         profile.addEventListener('click', getProfile);
         open.addEventListener('click', openHandler);
         await liff.init({ liffId: '1655380649-1GwY0XXg' })
         const idToken = liff.getDecodedIDToken();
         console.log(idToken)
         
      }

      init();
   </script>
</body>

</html>